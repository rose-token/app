@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /*
     * Rose Token Dark Theme
     *
     * A sophisticated dark theme with rose-gold accents
     * featuring glassmorphism and subtle gradient effects
     */

    /* Background colors */
    --bg-primary: #1a1a1f;
    --bg-secondary: #222228;
    --bg-card: rgba(38, 38, 45, 0.85);
    --bg-card-solid: #2a2a32;
    --bg-card-hover: rgba(50, 50, 58, 0.9);

    /* Border colors */
    --border-subtle: rgba(255, 255, 255, 0.08);
    --border-accent: rgba(212, 175, 140, 0.35);

    /* Text colors */
    --text-primary: #f5f5f7;
    --text-secondary: rgba(245, 245, 247, 0.7);
    --text-muted: rgba(245, 245, 247, 0.5);

    /* Brand colors */
    --rose-gold: #d4af8c;
    --rose-gold-light: #e8d4bc;
    --rose-gold-dark: #a67c52;
    --rose-pink: #d4a5a5;
    --rose-pink-light: #e8c4c4;
    --rose-pink-muted: rgba(212, 165, 165, 0.15);

    /* Status colors */
    --success: #4ade80;
    --success-bg: rgba(74, 222, 128, 0.15);
    --warning: #fbbf24;
    --warning-bg: rgba(251, 191, 36, 0.15);
    --error: #f87171;
    --error-bg: rgba(248, 113, 113, 0.15);
    --info: #60a5fa;
    --info-bg: rgba(96, 165, 250, 0.15);

    /* Accent card highlight (for selected/featured cards) */
    --card-accent-bg: rgba(212, 175, 140, 0.05);
    --card-accent-border: rgba(251, 191, 36, 0.25);

    /* Asset colors (vault) */
    --btc-orange: #f7931a;
    --gold-yellow: #ffd700;
    --usdc-blue: #2775ca;
    --eth-purple: #627eea;

    /* Chart colors (for Recharts SVG) */
    --chart-grid: rgba(255, 255, 255, 0.06);
    --chart-axis: rgba(255, 255, 255, 0.1);
    --chart-rose-gold: #d4af8c;
    --chart-rose-gold-fill-start: rgba(212, 175, 140, 0.4);
    --chart-rose-gold-fill-end: rgba(212, 175, 140, 0.05);

    /* Typography */
    --font-display: 'Cormorant Garamond', Georgia, serif;
    --font-body: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;

    /* Spacing & radius */
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 20px;
    --radius: 0.5rem;

    /* Shadows */
    --shadow-glow: 0 0 60px rgba(212, 175, 140, 0.08);
    --shadow-card: 0 4px 24px rgba(0, 0, 0, 0.4);

    /* Tailwind CSS variable mappings */
    --background: 240 6% 11%;
    --foreground: 240 5% 96%;

    --card: 240 6% 16%;
    --card-foreground: 240 5% 96%;

    --popover: 240 6% 16%;
    --popover-foreground: 240 5% 96%;

    --primary: 22 41% 69%;
    --primary-foreground: 240 6% 11%;

    --secondary: 240 4% 20%;
    --secondary-foreground: 240 5% 96%;

    --muted: 240 4% 20%;
    --muted-foreground: 240 5% 65%;

    --accent: 0 31% 74%;
    --accent-foreground: 240 6% 11%;

    --destructive: 0 62% 72%;
    --destructive-foreground: 240 6% 11%;

    --border: 240 4% 20%;
    --input: 240 6% 16%;
    --ring: 22 41% 69%;

    /* Task-Specific Action Colors */
    --task-stake: 43 96% 56%;
    --task-stake-foreground: 240 6% 11%;

    --task-claim: 217 91% 60%;
    --task-claim-foreground: 240 6% 11%;

    --task-unclaim: 240 4% 20%;
    --task-unclaim-foreground: 240 5% 96%;

    --task-complete: 22 41% 69%;
    --task-complete-foreground: 240 6% 11%;

    --task-approve: 142 71% 45%;
    --task-approve-foreground: 240 6% 11%;

    --task-cancel: 0 62% 72%;
    --task-cancel-foreground: 240 6% 11%;

    --approval-success: 142 71% 45%;
    --approval-success-foreground: 240 6% 11%;

    /* Status Badge Colors */
    --status-open: 217 91% 60%;
    --status-open-foreground: 240 6% 11%;

    --status-stakeholder-needed: 43 96% 56%;
    --status-stakeholder-needed-foreground: 240 6% 11%;

    --status-in-progress: 0 31% 74%;
    --status-in-progress-foreground: 240 6% 11%;

    --status-completed: 22 41% 69%;
    --status-completed-foreground: 240 6% 11%;

    --status-approved: 142 71% 45%;
    --status-approved-foreground: 240 6% 11%;

    --status-closed: 240 4% 35%;
    --status-closed-foreground: 240 5% 96%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: var(--font-body);
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Background noise texture overlay */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.03;
    pointer-events: none;
    z-index: 0;
  }

  /* Gradient glow overlay */
  body::after {
    content: '';
    position: fixed;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(ellipse at 20% 30%, rgba(212, 165, 165, 0.07) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(212, 175, 140, 0.05) 0%, transparent 45%),
                radial-gradient(ellipse at 50% 50%, rgba(212, 165, 165, 0.03) 0%, transparent 60%);
    pointer-events: none;
    z-index: 0;
  }

  /* Ensure content is above background effects */
  #root {
    position: relative;
    z-index: 1;
  }

  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    letter-spacing: -0.02em;
  }

  /* Form inputs */
  input, textarea, select {
    background: var(--bg-secondary);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-md);
    color: var(--text-primary);
    transition: all 0.2s ease;
  }

  input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: var(--rose-gold);
    box-shadow: 0 0 0 3px rgba(212, 175, 140, 0.1);
  }

  input::placeholder, textarea::placeholder {
    color: var(--text-muted);
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--bg-secondary);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--border-accent);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--rose-gold);
  }
}

/* RainbowKit Custom Styling - Dark Rose Theme */
@layer components {
  /* Style the main Connect Wallet button */
  button[data-testid="rk-connect-button"],
  button[class*="ConnectButton"] {
    background: linear-gradient(135deg, var(--rose-pink) 0%, var(--rose-gold) 100%) !important;
    color: var(--bg-primary) !important;
    font-weight: 600 !important;
    border-radius: var(--radius-md) !important;
    border: none !important;
    box-shadow: 0 4px 16px rgba(212, 165, 165, 0.3) !important;
    transition: all 0.3s ease !important;
  }

  button[data-testid="rk-connect-button"]:hover,
  button[class*="ConnectButton"]:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 6px 24px rgba(212, 165, 165, 0.4) !important;
  }

  /* Style the account button when connected */
  button[data-testid="rk-account-button"] {
    background: var(--bg-card) !important;
    border: 1px solid var(--border-accent) !important;
    color: var(--text-primary) !important;
    font-weight: 500 !important;
    border-radius: var(--radius-md) !important;
    transition: all 0.2s ease !important;
  }

  button[data-testid="rk-account-button"]:hover {
    border-color: var(--rose-gold) !important;
  }

  /* Style the chain/network button */
  button[data-testid="rk-chain-button"] {
    background: var(--bg-card) !important;
    border: 1px solid var(--border-subtle) !important;
    color: var(--text-secondary) !important;
    border-radius: var(--radius-md) !important;
    transition: all 0.2s ease !important;
  }

  button[data-testid="rk-chain-button"]:hover {
    border-color: var(--border-accent) !important;
  }

  /* Vault card hover effect using CSS variable */
  .vault-card-hover:hover {
    border-color: var(--border-accent) !important;
  }
}

/* Override RainbowKit modal styles */
div[data-rk] {
  --rk-colors-accentColor: var(--rose-gold) !important;
  --rk-colors-accentColorForeground: var(--bg-primary) !important;
  --rk-colors-modalBackground: var(--bg-card-solid) !important;
  --rk-colors-modalBorder: var(--border-subtle) !important;
  --rk-colors-modalText: var(--text-primary) !important;
  --rk-colors-modalTextSecondary: var(--text-secondary) !important;
  --rk-colors-connectButtonBackground: var(--bg-card-solid) !important;
  --rk-colors-menuItemBackground: var(--bg-card-solid) !important;
  --rk-colors-modalBackdrop: rgba(0, 0, 0, 0.6) !important;
  --rk-radii-modal: var(--radius-lg) !important;
  --rk-radii-actionButton: var(--radius-md) !important;
}

/* Ensure RainbowKit dropdown menu has dark background */
[data-rk] [role="menu"],
[data-rk] [role="dialog"],
[data-rk] [data-testid="rk-account-modal"],
[data-rk] [data-testid="rk-chain-modal"] {
  background: var(--bg-card-solid) !important;
  border: 1px solid var(--border-subtle) !important;
}

[data-rk] [role="menuitem"],
[data-rk] button[role="menuitem"] {
  background: transparent !important;
  color: var(--text-primary) !important;
}

[data-rk] [role="menuitem"]:hover,
[data-rk] button[role="menuitem"]:hover {
  background: var(--bg-card-hover) !important;
}

/* Utility classes for the new design system */
@layer utilities {
  .card {
    background: var(--bg-card);
    backdrop-filter: blur(20px);
    border: 1px solid var(--border-subtle);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    box-shadow: var(--shadow-card);
  }

  .glass {
    background: var(--bg-card);
    backdrop-filter: blur(20px);
    border: 1px solid var(--border-subtle);
  }

  .glass:hover {
    border-color: var(--border-accent);
  }

  /* Task card with proper hover border effect */
  .task-card-hover {
    border: 1px solid var(--border-subtle);
    transition: border-color 0.3s ease;
  }

  .task-card-hover:hover {
    border-color: var(--border-accent);
  }

  .gradient-text {
    background: linear-gradient(135deg, var(--rose-pink-light) 0%, var(--rose-pink) 50%, var(--rose-gold) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .gradient-primary {
    background: linear-gradient(135deg, var(--rose-pink) 0%, var(--rose-gold) 100%);
  }

  .gradient-success {
    background: linear-gradient(135deg, var(--success) 0%, #22c55e 100%);
  }

  .text-balance {
    text-wrap: balance;
  }

  .animate-fade-in {
    animation: fadeIn 0.6s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  .animate-pulse-slow {
    animation: pulse 2s infinite;
  }

  /* Button styles */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.625rem 1.25rem;
    font-weight: 600;
    font-size: 0.875rem;
    border-radius: var(--radius-md);
    background: linear-gradient(135deg, var(--rose-pink) 0%, var(--rose-gold) 100%);
    color: var(--bg-primary);
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
  }

  .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(212, 165, 165, 0.3);
  }

  .btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
  }

  .btn-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.625rem 1.25rem;
    font-weight: 500;
    font-size: 0.875rem;
    border-radius: var(--radius-md);
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border-accent);
    cursor: pointer;
    transition: all 0.2s ease;
    text-decoration: none;
  }

  .btn-secondary:hover {
    background: var(--bg-card-hover);
    border-color: var(--rose-gold);
  }

  .btn-secondary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* ============================================
     ANIMATION KEYFRAMES
     ============================================ */

  /* Page entrance (fade + slide up) */
  @keyframes pageEntrance {
    from {
      opacity: 0;
      transform: translateY(24px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Slide up (for staggered reveals) */
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(16px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Modal scale entrance */
  @keyframes modalScaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Modal scale exit */
  @keyframes modalScaleOut {
    from {
      opacity: 1;
      transform: scale(1);
    }
    to {
      opacity: 0;
      transform: scale(0.95);
    }
  }

  /* Backdrop fade */
  @keyframes backdropFadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes backdropFadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  /* Badge pulse (for disputes/alerts only) */
  @keyframes badgePulse {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.85;
      transform: scale(1.02);
    }
  }

  /* ============================================
     ANIMATION UTILITY CLASSES
     ============================================ */

  /* Page entrance animation */
  .animate-page-entrance {
    animation: pageEntrance 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  /* Slide up animation (for staggered children) */
  .animate-slide-up {
    animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  /* Modal animations */
  .animate-modal-in {
    animation: modalScaleIn 0.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .animate-modal-out {
    animation: modalScaleOut 0.15s cubic-bezier(0.4, 0, 1, 1) forwards;
  }

  .animate-backdrop-in {
    animation: backdropFadeIn 0.2s ease-out forwards;
  }

  .animate-backdrop-out {
    animation: backdropFadeOut 0.15s ease-in forwards;
  }

  /* Badge pulse (use for disputes/alerts only) */
  .animate-badge-pulse {
    animation: badgePulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Stagger delay utilities */
  .stagger-1 { animation-delay: 50ms; }
  .stagger-2 { animation-delay: 100ms; }
  .stagger-3 { animation-delay: 150ms; }
  .stagger-4 { animation-delay: 200ms; }
  .stagger-5 { animation-delay: 250ms; }
  .stagger-6 { animation-delay: 300ms; }
  .stagger-7 { animation-delay: 350ms; }
  .stagger-8 { animation-delay: 400ms; }
  .stagger-9 { animation-delay: 450ms; }
  .stagger-10 { animation-delay: 500ms; }

  /* Initial hidden state (prevents flash before animation) */
  .animate-initial {
    opacity: 0;
  }

  /* Button press feedback */
  .btn-press:active {
    transform: scale(0.95);
    transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* ============================================
     REDUCED MOTION SUPPORT
     ============================================ */

  @media (prefers-reduced-motion: reduce) {
    .animate-page-entrance,
    .animate-slide-up,
    .animate-modal-in,
    .animate-modal-out,
    .animate-backdrop-in,
    .animate-backdrop-out,
    .animate-badge-pulse,
    .animate-fade-in {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }

    .animate-initial {
      opacity: 1 !important;
    }

    .stagger-1, .stagger-2, .stagger-3, .stagger-4, .stagger-5,
    .stagger-6, .stagger-7, .stagger-8, .stagger-9, .stagger-10 {
      animation-delay: 0s !important;
    }

    .btn-press:active {
      transform: none !important;
    }
  }
}
